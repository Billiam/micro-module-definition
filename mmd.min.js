//	Micro Module Definition (MMD)
//	A tiny module definition and dependency management framework.
//	(c) 2012 Greg MacWilliam, Threespot.
//	Freely distributed under the MIT license.
	
var mmd=function(){var a={};return{define:function(){var b=arguments,c=function(a,c){for(c=0;c<b.length;c++)if(typeof b[c]===a)return b[c]},d=c("string"),e=c("object"),f=c("function");if(!d||!f)throw"invalid definition";a[d]={d:e instanceof Array?e:[],f:f}},require:function(b,c){var d=!(b instanceof Array),e=this,f=null,g,h,i;d&&(b=[b]);for(i=0;i<b.length;i++){g=b[i];if(g==="mmd")b[i]=e;else{if(!e.hasOwnProperty.call(a,g))throw g+" is undefined";h=a[g];if(!h.e){if(h.p)throw"circular reference to "+g;h.p=1,h.e=h.f.apply(f,e.require(h.d)),h.p=0}b[i]=h.e}}return c&&c.apply&&c.apply(f,b),d?b[0]:b}}}();